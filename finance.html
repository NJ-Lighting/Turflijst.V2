<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>💰 Finance | Turflijst</title>
  <link rel="stylesheet" href="/css/app.css" />
</head>
<body>
  <div class="content-wrapper">
    <h1>💰 Finance Overzicht</h1>

    <!-- KPI’s -->
    <section class="cards grid">
      <div class="card kpi"><div class="lbl">Koelkastwaarde</div><div id="kpi-fridge" class="val">€0,00</div></div>
      <div class="card kpi"><div class="lbl">Voorgeschoten</div><div id="kpi-prepaid" class="val">€0,00</div></div>
      <div class="card kpi"><div class="lbl">Ontvangen</div><div id="kpi-received" class="val">€0,00</div></div>
      <div class="card kpi"><div class="lbl">Statiegeld ontvangen</div><div id="kpi-deposit-earned" class="val">€0,00</div></div>
      <div class="card kpi"><div class="lbl">Profit/Loss</div><div id="kpi-profit" class="val">€0,00</div></div>
    </section>

    <!-- Buffer -->
    <section class="cards grid">
      <div class="card kpi"><div class="lbl">Buffer in</div><div id="kpi-buffer-in" class="val">€0,00</div></div>
      <div class="card kpi"><div class="lbl">Buffer uit</div><div id="kpi-buffer-out" class="val">€0,00</div></div>
      <div class="card kpi"><div class="lbl">Buffer beschikbaar</div><div id="kpi-buffer-available" class="val">€0,00</div></div>
    </section>

    <!-- Deposits -->
    <section class="card section">
      <h2>🏦 Statiegeld registreren</h2>
      <div class="row">
        <input id="deposit-amount" type="number" inputmode="decimal" step="0.01" placeholder="Bedrag in €" />
        <input id="deposit-note" type="text" placeholder="Opmerking (optioneel)" />
        <button id="btn-add-deposit">Opslaan</button>
      </div>
    </section>

    <!-- Verkocht per product -->
    <section class="card section">
      <h2>📦 Verkocht per product</h2>
      <table class="table">
        <thead><tr><th>Product</th><th class="right">Aantal</th></tr></thead>
        <tbody id="tbl-sold-per-product"></tbody>
      </table>
    </section>

    <!-- Betalingen -->
    <section class="card section">
      <h2>💸 Betalingen</h2>
      <div class="row">
        <label for="filter-user" class="muted">Filter gebruiker</label>
        <select id="filter-user"></select>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Gebruiker</th>
            <th class="right">Bedrag</th>
            <th>Opmerking</th>
            <th>Actie</th>
          </tr>
        </thead>
        <tbody id="tbl-payments"></tbody>
      </table>

      <div class="row">
        <select id="pay-user" title="Gebruiker"></select>
        <input id="pay-amount" type="number" inputmode="decimal" step="0.01" placeholder="Bedrag in €" />
        <input id="p-note" type="text" placeholder="Opmerking (optioneel)" />
        <button id="btn-add-payment">Betaling toevoegen</button>
      </div>
    </section>

    <!-- (optioneel) Maandoverzicht -->
    <section class="card section">
      <h2>📅 Maandoverzicht</h2>
      <table class="table">
        <thead>
          <tr><th>Maand</th><th class="right">Verkopen</th><th class="right">Betalingen</th><th class="right">Deposits</th></tr>
        </thead>
        <tbody id="month-stats"><tr><td colspan="4" class="muted">Wordt gevuld als data aanwezig is</td></tr></tbody>
      </table>
    </section>
  </div>

  <!-- Modules -->
  <script type="module" src="/js/core.js"></script>
  <script type="module" src="/js/supabase.client.js"></script>
  <script type="module" src="/js/api/finance.js"></script>
  <script type="module" src="/js/pages/finance.page.js"></script>
</body>
</html>